<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Legends Idle: Rise of Realms</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      text-align: center;
      padding: 20px;
    }
    .section {
      margin: 20px;
    }
    .button {
      background: #28a745;
      color: #fff;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      margin: 10px;
    }
    .log {
      background: #222;
      padding: 10px;
      margin-top: 20px;
      height: 150px;
      overflow-y: auto;
    }
    .inventory {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }
    .item {
      background: #444;
      padding: 10px;
      border-radius: 8px;
      min-width: 100px;
    }
    .talents {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 20px;
    }
    .talent {
      background: #333;
      padding: 10px;
      border: 1px solid #555;
      border-radius: 8px;
      width: 150px;
    }
    .boss {
      color: #f00;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Legends Idle: Rise of Realms</h1>

  <div class="section hero">
    <h2>Hero</h2>
    <p>Level: <span id="heroLevel">1</span></p>
    <p>XP: <span id="heroXP">0</span></p>
    <p>Coins: <span id="coins">0</span></p>
    <p>Talent Points: <span id="talentPoints">0</span></p>
    <p>Weapon: <span id="weapon">None</span></p>
    <button class="button" onclick="levelUpHero()">Level Up (Cost: <span id="levelCost">10</span>)</button>
  </div>

  <div class="section enemy">
    <h2>Enemy</h2>
    <p>Name: <span id="enemyName">Slime</span></p>
    <p>Tier: <span id="enemyTier">Common</span></p>
    <p>HP: <span id="enemyHP">10</span></p>
  </div>

  <div class="section">
    <h2>Inventory</h2>
    <div id="inventory" class="inventory"></div>
  </div>

  <div class="section">
    <h2>Talent Tree</h2>
    <div class="talents">
      <div class="talent">
        <p>Crit Chance: <span id="critLevel">0</span></p>
        <button class="button" onclick="upgradeTalent('crit')">+5% Crit</button>
      </div>
      <div class="talent">
        <p>Gold Gain: <span id="goldLevel">0</span></p>
        <button class="button" onclick="upgradeTalent('gold')">+10% Gold</button>
      </div>
      <div class="talent">
        <p>Base DPS: <span id="dpsLevel">0</span></p>
        <button class="button" onclick="upgradeTalent('dps')">+1 DPS</button>
      </div>
    </div>
  </div>

  <div class="section log" id="log"></div>

  <script>
    const hero = {
      level: 1,
      xp: 0,
      coins: 0,
      dps: 1,
      critChance: 0.1,
      critMultiplier: 2,
      equipped: null,
      inventory: [],
      talentPoints: 0,
      talents: { crit: 0, gold: 0, dps: 0 }
    };

    const enemyTiers = {
      Common: 1,
      Rare: 1.5,
      Elite: 2.5,
      Boss: 5
    };

    const enemyPool = [
      { name: "Slime", baseHp: 10, reward: 5, tier: "Common" },
      { name: "Goblin", baseHp: 20, reward: 10, tier: "Common" },
      { name: "Skeleton", baseHp: 35, reward: 15, tier: "Rare" },
      { name: "Orc", baseHp: 50, reward: 25, tier: "Rare" },
      { name: "Wraith", baseHp: 80, reward: 50, tier: "Elite" },
      { name: "Dragon", baseHp: 150, reward: 100, tier: "Boss" },
      { name: "Demon Lord", baseHp: 300, reward: 200, tier: "Boss" },
    ];

    let enemy = getRandomEnemy();
    let levelCost = 10;
    let enemiesDefeated = 0;

    const lootTable = [
      { name: "Iron Sword", type: "weapon", bonus: 1 },
      { name: "Steel Blade", type: "weapon", bonus: 2 },
      { name: "Knight's Claymore", type: "weapon", bonus: 4 },
    ];

    function updateUI() {
      document.getElementById("heroLevel").innerText = hero.level;
      document.getElementById("heroXP").innerText = hero.xp;
      document.getElementById("coins").innerText = hero.coins;
      document.getElementById("talentPoints").innerText = hero.talentPoints;
      document.getElementById("enemyHP").innerText = Math.max(0, Math.floor(enemy.hp));
      document.getElementById("levelCost").innerText = levelCost;
      document.getElementById("enemyName").innerText = enemy.name;
      document.getElementById("enemyTier").innerText = enemy.tier;
      document.getElementById("weapon").innerText = hero.equipped ? `${hero.equipped.name} (+${hero.equipped.bonus})` : 'None';
      document.getElementById("critLevel").innerText = hero.talents.crit;
      document.getElementById("goldLevel").innerText = hero.talents.gold;
      document.getElementById("dpsLevel").innerText = hero.talents.dps;
      renderInventory();
    }

    function logMessage(msg) {
      const log = document.getElementById("log");
      log.innerHTML = msg + "<br>" + log.innerHTML;
    }

    function levelUpHero() {
      if (hero.coins >= levelCost) {
        hero.coins -= levelCost;
        hero.level++;
        hero.dps += 1;
        levelCost = Math.floor(levelCost * 1.5);
        hero.talentPoints++;
        logMessage("Hero leveled up to " + hero.level);
        updateUI();
      } else {
        logMessage("Not enough coins to level up.");
      }
    }

    function getRandomEnemy() {
      const isBoss = (enemiesDefeated + 1) % 10 === 0;
      const tierFilter = isBoss ? 'Boss' : null;
      const candidates = enemyPool.filter(e => !tierFilter || e.tier === tierFilter);
      const e = candidates[Math.floor(Math.random() * candidates.length)];
      const scale = enemyTiers[e.tier];
      return {
        name: e.name,
        tier: e.tier,
        hp: Math.floor(e.baseHp * scale * (1 + hero.level * 0.1)),
        maxHp: Math.floor(e.baseHp * scale * (1 + hero.level * 0.1)),
        reward: Math.floor(e.reward * scale)
      };
    }

    function attackEnemy() {
      let baseDamage = hero.dps + hero.talents.dps + (hero.equipped ? hero.equipped.bonus : 0);
      let isCrit = Math.random() < hero.critChance;
      let damage = isCrit ? baseDamage * hero.critMultiplier : baseDamage;

      enemy.hp -= damage * 0.2;
      if (enemy.hp <= 0) {
        enemiesDefeated++;
        let reward = enemy.reward + hero.level * 2;
        reward += Math.floor(reward * (hero.talents.gold * 0.1));
        hero.coins += reward;
        hero.xp += 1;
        logMessage(`Defeated ${enemy.tier} ${enemy.name}! +${reward} coins`);

        if (Math.random() < 0.5) lootDrop();

        enemy = getRandomEnemy();
      } else if (isCrit) {
        logMessage("Critical hit! " + Math.floor(damage * 0.2) + " damage.");
      }
      updateUI();
    }

    function lootDrop() {
      const item = lootTable[Math.floor(Math.random() * lootTable.length)];
      hero.inventory.push(item);
      logMessage(`Found loot: ${item.name} (+${item.bonus})`);
    }

    function renderInventory() {
      const invDiv = document.getElementById("inventory");
      invDiv.innerHTML = "";
      hero.inventory.forEach((item, i) => {
        const itemDiv = document.createElement("div");
        itemDiv.className = "item";
        itemDiv.innerHTML = `${item.name}<br>+${item.bonus} DPS<br><button onclick="equipItem(${i})">Equip</button>`;
        invDiv.appendChild(itemDiv);
      });
    }

    function equipItem(index) {
      hero.equipped = hero.inventory[index];
      logMessage(`Equipped ${hero.equipped.name}`);
      updateUI();
    }

    function upgradeTalent(type) {
      if (hero.talentPoints <= 0) return;
      hero.talentPoints--;
      hero.talents[type]++;
      if (type === "crit") hero.critChance += 0.05;
      updateUI();
    }

    setInterval(attackEnemy, 1000);
    updateUI();
  </script>
</body>
</html>

